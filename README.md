# Домашнее задание к занятию "`Базы данных, их типы`" - `Лычагин Н.В.`


### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1. СУБД

Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

 Ответ

 1.1. Реляционная (SQL) СУБД, например, PostgreSQL
 Т.к. гарантирует целостность данных (ACID-транзакции, внешние ключи).
 1.1.* Redis или Memcached (In-memory кэширование для временного хранения результатов).
 1.2. Для лендингов и CRM использовать реляционная СУБД.
 1.2.* Да, реляционной СУБД. Например, PostgreSQL и MongoDB.
 1.3. Реляционные либо документо-ориентированные СУБД.
 1.3.* Да, реляционную СУБД, MySQL.
 1.4. Реляционные либо графовые СУБД.
 1.4.* Да, можно использовать Реляционные СУБД.
 1.5.* Да, можно использовать Реляционную СУБД.


### Задание 2. Транзакции
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

Приведите ответ в свободной форме.

Ответ

2.1. Шаги успешного пополнения баланса телефона
 
 1. Запрос на пополнение

  - Пользователь вводит номер телефона и сумму пополнения в интерфейсе (приложение, сайт, USSD).

  - Система проверяет корректность номера и суммы (например, минимальный/максимальный лимит).

 2. Проверка платёжных данных

  - Если оплата идёт через карту, система запрашивает данные (номер, срок действия, CVV) или использует токенизированные данные (Apple Pay / Google Pay).

  - Проводится проверка 3D Secure (если требуется).

 3. Резервирование средств

  - Банк или платёжный шлюз блокирует сумму на карте пользователя (холд).

  - Если средств недостаточно → транзакция отклоняется.

 4. Запрос к биллинговой системе оператора

  - Платежная система отправляет запрос оператору связи на зачисление средств.

  - Оператор проверяет номер на активность (не заблокирован ли он).

 5. Зачисление средств и подтверждение

  - Оператор увеличивает баланс номера.

  - Биллинговая система фиксирует транзакцию в логах.

 6. Финализация платежа

  - Банк списывает заблокированную сумму с карты.

  - Пользователь получает SMS или push-уведомление о пополнении.
  
  2.1* Действия при автоплатеже
  
  1. Срабатывание триггера

  - Система проверяет условия автоплатежа (например, дата или баланс ниже порога).

  2. Авторизация платёжных данных

  - Используются заранее сохранённые данные карты (токен).

  - Проводится бесшовная аутентификация (например, SCA — Strong Customer Authentication, если не требуется подтверждение).

  3. Проверка лимитов и комиссий

  - Система сверяет, не превышает ли сумма лимиты автоплатежа.

  - Применяются комиссии (если есть).

  4. Выполнение платежа

  - Средства списываются без дополнительного подтверждения (если пользователь согласен).

  - Оператор получает запрос и зачисляет баланс.

  5. Уведомление

  - Пользователю приходит SMS/email о списании и пополнении.

  6. Логирование и отчёт

  - Транзакция сохраняется в истории автоплатежей.

  - Если оплата не прошла, система повторяет попытку или уведомляет пользователя.

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

Отввет

3.1. Пять преимуществ SQL-систем перед NoSQL
  
   1. Гарантированная целостность данных (ACID)
   2. Единый синтаксис (SELECT, INSERT, UPDATE) для всех реляционных СУБД (PostgreSQL, MySQL, Oracle) и лёгкая миграция между системами.
   3. Жёсткая схема данных
   - Чёткая структура таблиц (столбцы, типы данных, ограничения NOT NULL, UNIQUE).
   - Исключает ошибки из-за неожиданных форматов (например, строка вместо числа).
   4. Гибкость в изменении запросов без переделки структуры
   5. Вертикальная масштабируемость
   
   3.1. Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.
   
   NewSQL — гибрид, сочетающий плюсы SQL и NoSQL:
    - Масштабируемость (Горизонтальное масштабирование (как NoSQL), но с поддержкой SQL-синтаксиса.)
	- Производительность (Высокая скорость даже при распределённых данных (шардинг без ручного управления))
	- Согласованность (Strong consistency (как в SQL), а не eventual consistency (как в NoSQL))
	- Гибкость (Поддержка JSON и реляционных моделей (как PostgreSQL с JSONB))
	- Отказоустойчивость (Автоматическое восстановление при падении узлов (как в NoSQL, но без потери транзакций)).

### Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

Ответ

Критерии:
	
	1. Безопастноть и отказоустойчивость.
	2. Согласованность и целостность данных.
	3. Масштабируемость.
	4. Производительность.
	
	Подойдет клиент-серверная модель ( кластер серверов с балансировщиком,чтобы распрделить больщой поток данных от большого кол-ва машин).